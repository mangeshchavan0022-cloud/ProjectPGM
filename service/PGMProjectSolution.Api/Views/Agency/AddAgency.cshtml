<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create Agency</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <div class="container py-4">
        <h2 class="mb-4">Create Agency</h2>

        <!-- Change action to match your controller route. If using Razor, you can use asp-controller/asp-action -->
        <form id="agencyForm" asp-controller="Agency" asp-action="Create" method="post" enctype="multipart/form-data" novalidate>
            <div class="row g-3">

                <div class="col-md-6">
                    <label for="AgencyId" class="form-label">Agency Id</label>
                    <input type="text" class="form-control" id="AgencyId" name="AgencyId" maxlength="50" required>
                    <div class="invalid-feedback">Agency Id is required (max 50 chars).</div>
                </div>

                <div class="col-md-6">
                    <label for="AgencyName" class="form-label">Agency Name</label>
                    <input type="text" class="form-control" id="AgencyName" name="AgencyName" maxlength="50" required>
                    <div class="invalid-feedback">Agency Name is required (max 50 chars).</div>
                </div>

                <div class="col-md-6">
                    <label for="AgencyType" class="form-label">Agency Type</label>
                    <input type="text" class="form-control" id="AgencyType" name="AgencyType" maxlength="50">
                </div>

                <div class="col-md-6">
                    <label for="ContactPerson" class="form-label">Contact Person</label>
                    <input type="text" class="form-control" id="ContactPerson" name="ContactPerson" maxlength="50">
                </div>

                <div class="col-md-6">
                    <label for="MobileNumber" class="form-label">Mobile Number</label>
                    <input type="tel" class="form-control" id="MobileNumber" name="MobileNumber" maxlength="50" pattern="[0-9+()\- ]{7,50}">
                    <div class="form-text">Digits and +()- allowed.</div>
                </div>

                <div class="col-md-6">
                    <label for="Email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="Email" name="Email" maxlength="50" required>
                    <div class="invalid-feedback">Please provide a valid email (max 50 chars).</div>
                </div>

                <div class="col-12">
                    <label for="Address" class="form-label">Address</label>
                    <textarea class="form-control" id="Address" name="Address" rows="2" maxlength="250"></textarea>
                </div>

                <div class="col-md-6">
                    <label for="Documents" class="form-label">Documents (optional)</label>
                    <input class="form-control" type="file" id="Documents" name="Documents" accept=".pdf,.doc,.docx,.jpg,.png">
                    <div class="form-text">Allowed: PDF, DOC/DOCX, JPG, PNG.</div>
                </div>

                <div class="col-md-6">
                    <label for="UserId" class="form-label">User Id</label>
                    <input type="text" class="form-control" id="UserId" name="UserId" maxlength="50" required>
                    <div class="invalid-feedback">User Id is required (max 50 chars).</div>
                </div>

                <div class="col-md-6">
                    <label for="CreatedOn" class="form-label">Created On</label>
                    <input type="datetime-local" class="form-control" id="CreatedOn" name="CreatedOn" required>
                </div>

                <div class="col-md-3 d-flex align-items-center">
                    <div class="form-check mt-2">
                        <input class="form-check-input" type="checkbox" value="true" id="IsActive" name="IsActive" checked>
                        <label class="form-check-label" for="IsActive">Is Active</label>
                    </div>
                </div>

                <div class="col-md-3">
                    <label for="CreatedBy" class="form-label">Created By (ID)</label>
                    <input type="number" class="form-control" id="CreatedBy" name="CreatedBy" min="0" required>
                    <div class="invalid-feedback">CreatedBy is required and must be a number.</div>
                </div>

            </div>

            <div class="mt-4">
                <button type="submit" class="btn btn-primary">Save Agency</button>
                <button type="reset" class="btn btn-outline-secondary ms-2">Reset</button>
            </div>
        </form>
    </div>

    <!-- Bootstrap JS bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Set CreatedOn to current datetime-local value
        (function setCreatedOnNow() {
          const dtInput = document.getElementById('CreatedOn');
          if (!dtInput) return;
          const now = new Date();
          // format to yyyy-MM-ddTHH:mm (datetime-local)
          const pad = n => n.toString().padStart(2, '0');
          const value = `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}T${pad(now.getHours())}:${pad(now.getMinutes())}`;
          dtInput.value = value;
        })();

        // Simple Bootstrap form validation
        (function () {
          'use strict';
          const form = document.getElementById('agencyForm');
          form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        })();
    </script>
</body>
</html>
